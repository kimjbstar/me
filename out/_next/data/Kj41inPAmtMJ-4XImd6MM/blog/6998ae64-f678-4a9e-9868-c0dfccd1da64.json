{"pageProps":{"blog":{"id":"6998ae64-f678-4a9e-9868-c0dfccd1da64","title":"SWCë¥¼ í†µí•œ ë” ë¹ ë¥¸ typescript ë¹Œë“œ ë„ì…","content":"## ì„œë¡ \n\nì—…ë¬´ìš© ë…¸íŠ¸ë¶ ê¸°ì¤€ìœ¼ë¡œ NestJS ê¸°ë°˜ ë¡œì§€íŒŒìŠ¤íƒ€ APIë¥¼ ë¹Œë“œí•˜ëŠ”ë° ëŒ€ëµ 8ì´ˆ ì •ë„ ê±¸ë ¸ìŠµë‹ˆë‹¤. ë°°í¬í• ë•Œë„ ê·¸ë ‡ì§€ë§Œ ì½”ë“œë¥¼ ë³€ê²½í•˜ê³  ê²°ê³¼ë¥¼ ë³´ëŠ” iterationì´ ëŠë ¤ ì´ ë³‘ëª© ì§€ì ì´ ê°œë°œ ê³¼ì •ì— ë§ì€ ë³‘ëª©ì„ ì œê³µí–ˆìŠµë‹ˆë‹¤.\n\nìŠ¤í”„ë¦°íŠ¸ ì¢…ë£Œ í›„ ì ì‹œ ì½”ë“œë¥¼ ì •ë¦¬í•˜ëŠ” ê¸°ê°„ì„ í™œìš©í•˜ì—¬ ì´ ë¶€ë¶„ì„ í•´ê²°í•´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.\n\n## ìµœì í™”\n\në¹Œë“œí•˜ëŠ” ìƒì„¸ ê³¼ì •ì„ verbose ì˜µì…˜ ë“±ìœ¼ë¡œ ë³´ê³  ì‹¶ì—ˆì§€ë§Œ ì‹¤ì§ˆì ìœ¼ë¡œ ìƒê°í•˜ëŠ” ì˜µì…˜ì„ ëª»ì°¾ì•˜ìŠµë‹ˆë‹¤.\n\nê·¸ë˜ì„œ ëŒ€ì‹  `--diagnostics` ì˜µì…˜ì„ ë„£ì–´ ëŒ€ëµì ìœ¼ë¡œ ì¡°íšŒí•´ë³´ì•˜ë”ë‹ˆ\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc01.png)\n\níŠ¹ì • ì˜µì…˜ ë•Œë¬¸ì— ë³‘ëª©ì´ ë‚œë‹¤ë³´ë‹¤ëŠ” ì „ë°˜ì ìœ¼ë¡œ ê· ë“±í•˜ê²Œ(?) ëŠë ¸ìŠµë‹ˆë‹¤.\n\n[Performance Â· microsoft/TypeScript Wiki](https://github.com/microsoft/TypeScript/wiki/Performance)\n\níƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìµœì í™”í•˜ëŠ” ë°©ë²•ì€ typescript í”„ë¡œì íŠ¸ ìœ„í‚¤ì—ì„œ ë¬¸ì„œê°€ ì˜ ë˜ì–´ìˆê³ , ì—¬ê¸°ì—ë„ ìµœì í™” ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€ê°€ ì œì‹œë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤.\n\nê·¸ë˜ì„œ ì´ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì—¬ ì†Œìœ„ ì‹œë„í•´ë³´ê¸° ì‰¬ì›Œë³´ì´ëŠ” ë°©ë²•(tsconfig.json ë“± ë¹Œë“œ ì˜µì…˜ ìˆ˜ì •) ëª‡ ê°€ì§€ë¥¼ ì‹œë„í•˜ì—¬ ì•½ê°„ì˜ íš¨ê³¼ëŠ” ì–»ì—ˆì§€ë§Œ ê·¸ íš¨ê³¼ëŠ” ì‹¤ì§ˆì ìœ¼ë¡œ ë¯¸ë¹„í–ˆìŠµë‹ˆë‹¤.\n\nê·¸ ë‹¤ìŒ ì²´í¬ ì‚¬í•­ìœ¼ë¡œëŠ” type definition ìª½ì„ ì»´íŒŒì¼ëŸ¬ ì¹œí™”ì ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì²´í¬ ë° íŒŒì‹± ì‹œê°„ì„ ì¤„ì—¬ë³´ê±°ë‚˜, ì»´íŒŒì¼ ëŒ€ìƒì¸ íŒŒì¼ì„ `glob` í˜•ì‹ì´ ì•„ë‹Œ ì§ì ‘ ì§€ì •í•˜ë¯€ë¡œì¨ íŒŒì¼ì‹œìŠ¤í…œ ìª½ ë¶€í•˜ë¥¼ ì¤„ì´ëŠ” ë“± ë°©ë²•ì´ ìˆì§€ë§Œ, ì´ ì—­ì‹œ ë“œëŠ” í’ˆì— ë¹„í•´ ë§ì€ ì´ë“ì„ ë³¼ìˆ˜ ìˆì„ ì§€ê°€ ë¶ˆí™•ì‹¤í–ˆìŠµë‹ˆë‹¤.\n\n# ëŒ€ì²´ì œ íƒìƒ‰\n\nê·¸ë¦¬í•˜ì—¬ ìƒê°ì´ ëŒê³  ëŒì•„ ë¹Œë“œë¥¼ ì•„ì˜ˆ ë‹¤ë¥¸ íˆ´ì„ ì´ìš©í•˜ë©´ ì–´ë–¨ê¹Œë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ì˜ˆì „ì—ë„ NestJSë¥¼ ë‹¨ì¼ js íŒŒì¼ë¡œ ë²ˆë“¤ë§í•˜ì—¬ lambdaì— ì˜¬ë¦¬ëŠ” ì‹œë„ë¥¼ í• ë•Œ webpackìœ¼ë¡œ ì‘ì—…í•œ ê²½í—˜ì´ ìˆì–´, ì–´ë–»ê²Œë“  ë°©ë²•ì´ ìˆê² ì§€ í•˜ëŠ” ë§ˆìŒì— ë‹¤ì‹œ í•œë²ˆ ë¦¬ì„œì¹˜ë¥¼ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\n\n### **webpack**\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc02.png)\n\nì²˜ìŒì—” ì´ ë°©ë²•ìœ¼ë¡œ ì‹œë„í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìš”ìƒˆ í¼í¬ë¨¼ìŠ¤ìª½ ê°œì„ ì´ ëœ ëŒ€ì²´ ë²ˆë“¤ëŸ¬ê°€ ë§ì´ ë“±ì¥í•˜ì—¬ ìƒˆë¡œìš´ ë°©ë²•ë“¤ë¡œ ë¨¼ì € ì‹œë„í•´ ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.\n\n### **esbuild**\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc03.png)\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc04.png)\n\nì´ê²ƒë„ tscì— ë¹„í•´ ì •ë§ ë¹ ë¦…ë‹ˆë‹¤. í•˜ì§€ë§Œ ê³µêµë¡­ê²Œë„ nestJSëŠ” decorator ê¸°ë°˜ ì•„í‚¤í…ì³ê°€ í•µì‹¬ì¸ë° esbuildëŠ” decoratorë¥¼ ë¯¸ì§€ì›í•˜ê³  ì ì •ì ìœ¼ë¡œ ê°œë°œ ê³„íšë„ ì—†ë‹¤ê³  í•œë‹¤. \n\nì‚¬ì‹¤ decoratorëŠ” ì‹¤ì§ˆì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆê¸°ëŠ” í•˜ì§€ë§Œ ì•„ì§ ê³µì‹ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹ˆê³ , íˆ´ ìì²´ê°€ \"javascript bundler\"ì´ê¸° ë•Œë¬¸ì— typescript ê´€ë ¨ ì˜µì…˜ì„ ëª¨ë‘ ì§€ì›í•´ì•¼ í•  ì´ìœ ëŠ” ì—†ìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ ì•„ì‰½ì§€ë§Œ ì ìš©í•˜ê¸°ì— ì–´ë ¤ì›€ì´ ìˆë‹¤ê³  íŒë‹¨ë˜ì–´ ë‹¤ë¥¸ ì†”ë£¨ì…˜ì„ ì°¾ì•„ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤.\n\n[Feature request: Decorators support Â· Issue #104 Â· evanw/esbuild](https://github.com/evanw/esbuild/issues/104)\n\n### **swc**\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc05.png)\n\n[swc](https://swc.rs/)\n\nì§€í–¥ì  ì°¨ì´ì´ê¸´í•œë° ìœ„ì—ì„œ ì–¸ê¸‰í•œ webpack, esbuild ë“±ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì€ ì‚¬ì‹¤ ìš©ë„ ìì²´ê°€ í”„ë¡ íŠ¸ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë²ˆë“¤ëŸ¬ì´ê³ , ì´ ì¤‘ ts ë¡œë“œ ê¸°ëŠ¥ì´ ìˆëŠ” ë¶€ë¶„ì„ ë½‘ì•„ í™œìš©í•˜ëŠ” ì ‘ê·¼ ë°©ì‹ì— ê°€ê¹Œì› ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ swcëŠ” ë²ˆë“¤ëŸ¬ê°€ ì•„ë‹ˆë¼ **ì»´íŒŒì¼ëŸ¬**(íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬)ë¥¼ í‘œë°©í•˜ê³  ìˆìŠµë‹ˆë‹¤! \n\n```\nğŸ›  Transcompile\nswc is a typescript / javascript compiler.\nIt consumes a javascript or typescript file which uses recently added features like async-await and emits javascript code which can be executed on old browsers.\nIt supports all published typescript versions and all valid ecmascript, including some stage 3 proposals as an input, and supports es3 or higher as an output\n```\n\n```\nğŸš€ Super fast\nIt's 20x faster than babel on single thread, and 70x faster on 4 core benchmark\n```\n\nì°¸ê³ ìš© ë²¤ì¹˜ë§ˆí‚¹ í˜ì´ì§€ì— ìˆëŠ” ì´ë¯¸ì§€ ì¤‘ í•˜ë‚˜, esbuildë³´ë‹¤ë„ ë¹ ë¦…ë‹ˆë‹¤.\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc06.png)\n\n[Transforms | swc](https://swc.rs/docs/benchmark-transform/)\n\n# ì ìš©\n\nì ìš© ë¦¬ì„œì¹˜ ê³¼ì • ì¤‘ì—ëŠ” í•­ìƒ ë‘ê°€ì§€ ì´ìŠˆê°€ ë”°ë¼ë‹¤ë…”ëŠ”ë°\n\n1. ë°ì½”ë ˆì´í„° ê´€ë ¨ ë¶€ë¶„ì´ ë¬¸ì œì—†ì´ ì»´íŒŒì¼ ë˜ëŠ”ê°€?\n2. tsconfig-pathë¥¼ í™œìš©í•´ import ì‹œì— ìƒëŒ€ê²½ë¡œ ëŒ€ì‹  alias ì²˜ë¦¬ëœ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë° ì´ë¶€ë¶„ì´ ì˜ í•´ì„ë˜ì–´ ì»´íŒŒì¼ ë˜ëŠ”ê°€?\n\nì˜€ìŠµë‹ˆë‹¤. ì ìš© ì‹œë„í–ˆë˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ì´ ë¶€ë¶„ì—ì„œ ë§‰íˆê±°ë‚˜, ë¶ˆê°€ëŠ¥í•œ ì§€ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.\n\n```tsx\n// .swcrc ì˜µì…˜ íŒŒì¼, ë°ì½”ë ˆì´í„° ì˜µì…˜ì´ ì•„ì£¼ ì˜ ì§€ì›ëœë‹¤.\n// paths ê´€ë ¨ ì˜µì…˜ë„ ì§€ì›ë˜ëŠ”ë° êµ³ì´ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ì´ìŠˆê°€ ì—†ì–´ì„œ íŒ¨ìŠ¤\n{\n\t\"module\": {\n\t\t\"type\": \"commonjs\"\n\t},\n\t\"jsc\": {\n\t\t\"parser\": {\n\t\t\t\"syntax\": \"typescript\",\n\t\t\t\"tsx\": false,\n\t\t\t\"decorators\": true,\n\t\t\t\"dynamicImport\": false\n\t\t},\n\t\t\"transform\": {\n\t\t\t\"legacyDecorator\": true,\n\t\t\t\"decoratorMetadata\": true\n\t\t},\n\t\t\"target\": \"es2017\",\n\t\t\"keepClassNames\": false\n\t}\n}\n```\n\n3. ìƒˆë¡œìš´ ì´ìŠˆ ë“±ì¥, ëœ¬ê¸ˆì—†ì´ swaggerìª½ì´ ë¹Œë“œì—ì„œ ë§‰íˆëŠ” ì´ìŠˆë¥¼ ë§Œë‚¬ìŠµë‹ˆë‹¤. \n\n`@nestjs/swagger`ëŠ” í”„ë¡œì íŠ¸ ë‚´ì— ìˆëŠ” ëª¨ë“  DTO ê´€ë ¨ íŒŒë¼ë¯¸í„°, Body, Query ë“±ì„ ê¸ì–´ ë¬¸ì„œë¥¼ ë¹Œë“œí•˜ëŠ” ê¸°ëŠ¥ì´ ìˆëŠ”ë°, ê¸ë‹¤ ì–´ë”˜ê°€ì—ì„œ typeì´ ì—†ëŠ” ì§€ì ì„ ë§Œë‚˜ ì—ëŸ¬ê°€ ë‚œë“¯ í•œë°, ê¸ëŠ” ìˆœì„œê°€ ìˆœì°¨ì ì´ì§€ ì•Šê¸° ë•Œë¬¸ì— ì°¾ëŠ”ë°ì— ì• ë¥¼ ì¡°ê¸ˆ ë¨¹ì—ˆìŠµë‹ˆë‹¤.\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc07.png)\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc08.png)\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc09.png)\n\në²”ì¸ì€ ì´ ì½”ë“œì— Body ë°ì½”ë ˆì´í„° ê°™ì€ ì¼€ì´ìŠ¤ì˜€ê³ , ê¸°ì¡´ tsc ë¹Œë“œíˆ´ì—ì„œëŠ” ì´ëŸ° ì½”ë“œë¥¼ ì ì •ì ìœ¼ë¡œ anyë¡œ ë°”ê¿” ì»´íŒŒì¼ í•˜ëŠ”ë°, swcì—ì„œëŠ” ê·¸ë ‡ì§€ ì•Šì•„ ì˜ˆìƒí•˜ì§€ ì•Šì€ ì—ëŸ¬ê°€ ë‚œ ê²ƒìœ¼ë¡œ ì¶”ì¸¡ ì •ë„ë¥¼ í•œ í›„ ë§ˆì € ë¦¬ì„œì¹˜ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.\n\nê·¸ë¦¬í•˜ì—¬ tsconfig.json ì˜µì…˜ì— noImplicitAnyë¥¼ ë„£ì–´ lintë¥¼ ë”ìš± strictí•˜ê²Œ ë§Œë“  í›„, ì½”ë“œ ìˆ˜ì • ì‘ì—…ì„ í–ˆìŠµë‹ˆë‹¤.\n\n# ë¹Œë“œ\n\në¹Œë“œê°€ ì„±ê³µí–ˆê³  **ê²°ê³¼ëŠ” ë†€ë¼ìš¸ ì •ë„ë¡œ ë¹¨ëìŠµë‹ˆë‹¤.**\n\nê°œì¸ imac ê¸°ì¤€ (3.8 GHz 8ì½”ì–´ Intel Core i7, 40GB 2133 MHz DDR4)\n\n- ì•½ 6.74s â†’ ì•½ 0.51s\n- ìŠ¤í¬ë¦°ìƒ·\n    \n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc12.png)\n    \n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc13.png)\n    \n\nì—…ë¬´ìš© macbook ê¸°ì¤€ (2.6 GHz 6ì½”ì–´ Intel Core i7, 16GB 2667 MHz DDR4) ê¸°ì¤€\n\n- ì•½ 7.54s â†’ ì•½ 0.773s\n- ìŠ¤í¬ë¦°ìƒ·\n    \n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc14.png)\n    \n\n## ì´ìŠˆ íŠ¸ë˜í‚¹\n\ní•˜ì§€ë§Œ class-validator ê¸°ë°˜ DTOê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•ŠëŠ” ì´ìŠˆë¥¼ ë°œê²¬í•˜ì—¬ ì‹¤ì œ í”„ë¡œë•íŠ¸ ë„ì…ì€ ì ì • ì¤‘ë‹¨í•˜ê³ , ìŠ¤í”„ë¦°íŠ¸ ì¼ì •ì´ ë¹ ë“¯í•˜ì—¬ ìš°ì„  ë‚¨ì€ ì¼ì •ì„ ì†Œí™”í•˜ëŠ” ê²ƒìœ¼ë¡œ 1ì°¨ ê²°ë¡ ì„ ì§€ì—ˆìŠµë‹ˆë‹¤.\n\n```tsx\n// DTO ì •ì˜\nexport class PostListArgs {\n\tcompany_id?: number\n  name?: string\n}\n\n// ì»¨íŠ¸ë¡¤ëŸ¬\nasync find(@Query() args: PostListArgs) {\n\t\tconsole.log(args)\n    const result = await this.postsService.findMany(args)\n    // ...\n}\n\n/**\nì˜ˆë¥¼ ë“¤ì–´ ìœ„ì™€ ê°™ì´ DTOì™€ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì •ì˜í•œ í›„,\nexample.com/api/posts?company_id=1&name=john ë“± querystringìœ¼ë¡œ ì „ë‹¬í•œ ê°’ì´\nswcë¡œ ë¹Œë“œë˜ì—ˆì„ ê²½ìš° ë¬´ì‹œë˜ëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.\n*/\n```\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc10.png)\n\nì›ì¸ì„ ë”¥í•˜ê²Œ ì²´í¬í•´ë³´ë©´, NestJSì—ì„œ DTOì— ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” class-validator, class-transformer ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë ¨ ì´ìŠˆì¸ë°, ê°€ë³ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œëŠ” ì•„ë‹Œ ê²ƒìœ¼ë¡œ ë³´ì—¬ notificationì„ ê±¸ì–´ë†“ê³  ëª¨ë‹ˆí„°ë§ì„ ê³„ì† í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.\n\n![](https://pihxnuyialxsmkzxlpjj.supabase.co/storage/v1/object/public/bucket01/swc11.png)\n\ní•˜ì§€ë§Œ ì´ìŠˆê°€ ë‹¹ì¥ í•´ê²°ë˜ê¸°ëŠ” ì–´ë ¤ìš¸ ê²ƒìœ¼ë¡œ íŒë‹¨í•˜ì—¬, ì´ ì´ìŠˆì—ì„œ ì œì‹œëœ workaroundë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ëª¨ë“  DTO í´ë˜ìŠ¤ í•„ë“œì— ê¸°ë³¸ê°’ì„ undefinedë¡œ ë†“ìœ¼ë©´ ì´ìŠˆ ìì²´ëŠ” í•´ê²°ë©ë‹ˆë‹¤.\n\n```typescript\n// ì¦‰ DTO ì •ì˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•©ë‹ˆë‹¤.\nexport class PostListArgs {\n\tcompany_id?: number = undefined\n  name?: string = undefined\n}\n```","created_at":"2021-09-13T08:10:34+00:00","subtitle":null,"is_show":true}},"__N_SSG":true}